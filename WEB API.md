Документация Web API для управления бортовым модулем ESP8266. Все команды доступны при подключении к Wi-Fi сети планера (`Glider-Timer`).

**Базовый URL:** `http://192.168.4.1`

---

### 1. Статус системы
Возвращает текущее состояние устройства, сенсоров и данные телеметрии.
*   **Путь:** `/status`
*   **Метод:** `GET`
*   **Пример:** `http://192.168.4.1/status`
*   **Параметры ответа (JSON):**
    *   `status`: "ok" — сервер активен.
    *   `hw_ok`: `true/false` — физическое наличие барометра на I2C шине.
    *   `calibrated`: `true/false` — выполнен ли замер базового давления.
    *   `calibrating`: `true/false` — идет ли процесс калибровки в данный момент.
    *   `monitoring`: `true/false` — включен ли активный опрос датчика.
    *   `logging`: `true/false` — включен ли вывод логов в Serial.
    *   `stored_base`: значение базового давления, сохраненное в энергонезависимой памяти (0, если файл отсутствует).
    *   `current_p`: текущее атмосферное давление в Паскалях (доступно при `monitoring: true`).
    *   `base`: текущее активное базовое давление, используемое для расчета высоты.
    *   `alt`: текущая отфильтрованная высота в метрах (появляется после калибровки).
    *   `temp`: температура датчика в °C.
    *   `stable`: `true/false` — индикатор стабильности датчика (отсутствие движения).

---

### 2. Калибровка барометра (Полная)
Запускает процедуру термостабилизации (10 сек) и сбора 2000 образцов давления для установки новой базы.
*   **Путь:** `/calibrate`
*   **Метод:** `GET`
*   **Особенности:** Возвращает код `202 Accepted` и блокирует выполнение на ~20 секунд. Не сохраняет результат в файловую систему автоматически.
*   **Логи:** Прогресс отображается в Serial терминале платы.
---

### 3. Сохранение калибровки
Записывает текущее значение базового давления из оперативной памяти в файл `calib.json` (LittleFS).
*   **Путь:** `/calibrate/save`
*   **Метод:** `GET`
*   **Описание:** Позволяет сохранить результат калибровки, чтобы он автоматически загрузился после перезагрузки модуля.

---

### 4. Быстрое обнуление (Zero)
Устанавливает текущее давление как "ноль метров" без термостабилизации (сбор 500 образцов, ~2 сек).
*   **Путь:** `/zero`
*   **Метод:** `GET`
*   **Описание:** Используется для оперативного сброса высоты перед стартом. Сбор 500 образцов (~2 сек).

---

### 5. Управление мониторингом барометра
Включает/выключает опрос датчика и расчет высоты.
*   **Путь:** `/baro`
*   **Метод:** `GET`
*   **Аргументы:** `enable=1` (включить), `enable=0` (выключить).
*   **Пример:** `http://192.168.4.1/baro?enable=1`
*   **Примечание:** По умолчанию после включения платы мониторинг выключен для экономии ресурсов.

---

### 6. Управление Serial-логами
Включает или выключает вывод данных телеметрии в Serial-порт (USB).
*   **Путь:** `/log`
*   **Метод:** `GET`
*   **Аргументы:** `enable=1` (включить), `enable=0` (выключить).
*   **Пример:** `http://192.168.4.1/log?enable=1`
*   **Описание:** При включении плата начинает спамить в терминал текущую высоту и состояние стабильности каждую секунду (или согласно `BARO_INTERVAL`).

---

### 7. Загрузка полетной программы
Записывает новую программу в память устройства.
*   **Путь:** `/program`
*   **Метод:** `POST`
*   **Тело запроса:** JSON объект программы.
*   **Особенности:** Требует валидного JSON. В браузере напрямую через адресную строку не вызывается (требуется специализированное ПО или мобильное приложение).